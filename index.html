<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>テラリア風ゲーム</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden; /* スクロールバーを非表示にします */
            position: relative; /* 相対位置の基準を設定 */
        }
        #canvas {
            display: block; /* デフォルトのインライン設定をブロックに変更 */
        }
        #controls {
            position: absolute; /* ボタンを絶対位置で配置 */
            bottom: 20px; /* 下から20pxの位置に配置 */
            left: 20px; /* 左から20pxの位置に配置 */
            z-index: 1000; /* キャンバスの上に表示するための最前面指定 */
        }
        button {
            font-size: 20px;
            margin: 5px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <!-- ゲームのキャンバス -->
    <canvas id="canvas" style="background-color: rgb(93, 93, 212);"></canvas>

    <!-- モバイル用の操作ボタン -->
    <div id="controls">
        <button id="up">↑</button>
        <button id="left">←</button>
        <button id="down">↓</button>
        <button id="right">→</button>
        <button id="respawn">リスポーン</button>
    </div>

    <!-- JavaScriptの読み込み -->
    <script src="utils/getBlockImage.js"></script>
    <script src="utils/sounds.js"></script>
    <script src="utils/deathScreen.js"></script>
    <script src="sprites/Sprite.js"></script>
    <script src="sprites/Mob.js"></script>
    <script src="sprites/MobSpawner.js"></script>
    <script src="boss/Boss.js"></script>
    <script src="hud/Item.js"></script>
    <script src="hud/Inventory.js"></script>
    <script src="hud/HealthBar.js"></script>
    <script src="hud/BossHealthBar.js"></script>
    <script src="sprites/Block.js"></script>
    <script src="sprites/BlockHandler.js"></script>
    <script src="sprites/ToolHandler.js"></script>
    <script src="sprites/Pellet.js"></script>
    <script src="sprites/Arrow.js"></script>
    <script src="sprites/Player.js"></script>
    <script src="crafting/Crafting.js"></script>
    <script src="crafting/Recipe.js"></script>
    <script src="game/World.js"></script>
    <script src="game/Game.js"></script>
    <script src="Main.js"></script>

    <!-- モバイル対応のためのJavaScript -->
    <script>
        const game = new Game(800, 600);
        game.start(); // ゲームの開始を追加

        document.getElementById('up').addEventListener('mousedown', () => game.keys.add('w'));
        document.getElementById('down').addEventListener('mousedown', () => game.keys.add('s'));
        document.getElementById('left').addEventListener('mousedown', () => game.keys.add('a'));
        document.getElementById('right').addEventListener('mousedown', () => game.keys.add('d'));

        document.getElementById('up').addEventListener('mouseup', () => game.keys.delete('w'));
        document.getElementById('down').addEventListener('mouseup', () => game.keys.delete('s'));
        document.getElementById('left').addEventListener('mouseup', () => game.keys.delete('a'));
        document.getElementById('right').addEventListener('mouseup', () => game.keys.delete('d'));

        document.getElementById('respawn').addEventListener('click', () => {
            const player = game.sprites.find(sprite => sprite instanceof Player);
            if (!player.isAlive) {
                game.deathScreen = false;
                player.respawn();
            }
        });
    </script>
</body>
</html>
